exporters:
  - sumologic/default
{{- if eq .Values.sumologic.metrics.sourceType "http" }}
  - sumologic/apiserver
  - sumologic/control_plane
  - sumologic/controller
  - sumologic/kubelet
  - sumologic/node
  - sumologic/scheduler
  - sumologic/state
{{- end }}
processors:
  - memory_limiter
  - metricstransform
  - groupbyattrs
  - resource
  - k8s_tagger
  - source
{{- if .Values.sumologic.metrics.otelcol.extraProcessors }}
{{- range $processor := .Values.sumologic.metrics.otelcol.extraProcessors }}
{{ printf "- %s" ( $processor | keys | first ) | indent 2 }}
{{- end }}
{{- end }}
  - resource/remove_k8s_pod_pod_name
  - resource/delete_source_metadata
  - sumologic_schema
  - transform/set_name
  - groupbyattrs/group_by_name
  - transform/remove_name
  - filter/drop_unnecessary_metrics
{{- if .Values.sumologic.metrics.enableDefaultFilters }}
  - filter/app_metrics
{{- end }}
  - batch
{{- if eq .Values.sumologic.metrics.sourceType "http" }}
  - transform/prepare_routing
  - routing
{{- else }}
  - transform/drop_routing_attribute
{{- end }}
receivers:
  - telegraf
  - otlp
