<source>
  @type zipkin
  @label @TRACING
  port 9411
</source>
<label @TRACING>
  <filter tracing.**>
    @type kubernetes_sumologic
    tracing_format true
    tracing_namespace 'namespace'
    tracing_pod 'pod'
    tracing_pod_id 'pod_id'
    tracing_container_name 'container_name'
    tracing_host 'hostname'
    tracing_label_prefix 'pod_label_'
    tracing_annotation_prefix 'pod_annotation_'
    source_host_key_name '_sourceHost'
    source_category_key_name '_sourceCategory'
    source_name_key_name '_sourceName'
    collector_key_name '_collector'
    collector_value "{{- if .Values.sumologic.collectorName }}{{ .Values.sumologic.collectorName }}{{- else}}{{ .Values.sumologic.clusterName }}{{- end}}"
  </filter>
{{- if .Values.sumologic.traces.fluentd_stdout }}
  <filter tracing.**>
    @type stdout
  </filter>
{{- end }}
  <match tracing.**>
    @type zipkin
    endpoint "#{ENV['SUMO_ENDPOINT_TRACES']}"
    content_type application/json
    open_timeout 1
  </match>
</label>