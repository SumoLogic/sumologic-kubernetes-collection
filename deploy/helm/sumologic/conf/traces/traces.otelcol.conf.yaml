receivers:
  opencensus: {}
  jaeger:
    protocols:
      grpc:
  zipkin:
    endpoint: {{ .Values.otelcol.receivers.zipkin.endpoint }}
processors:
  k8s_tagger:
    passthrough: {{ .Values.otelcol.processors.k8s_tagger.passthrough }}
    extract:
      metadata:
        {{- range .Values.otelcol.processors.k8s_tagger.extract.metadata }}
        - {{ . | quote }}
        {{- end }}
      tags:
        {{- range $key, $val := .Values.otelcol.processors.k8s_tagger.extract.tags }}
        {{ $key }}: {{ $val | quote }}
        {{- end }}
      annotations:
        {{- range .Values.otelcol.processors.k8s_tagger.extract.annotations }}
        - tag_name: {{ .tag_name | quote }}
          key: {{ .key | quote }}
        {{- end }}
      labels:
        {{- range .Values.otelcol.processors.k8s_tagger.extract.labels }}
        - tag_name: {{ .tag_name | quote }}
          key: {{ .key | quote }}
        {{- end }}
  queued_retry:
    num_workers: {{ .Values.otelcol.processors.queued_retry.num_workers }}
    queue_size: {{ .Values.otelcol.processors.queued_retry.queue_size }}
    retry_on_failure: {{ .Values.otelcol.processors.queued_retry.retry_on_failure }}
  batch:
    send_batch_size: {{ .Values.otelcol.processors.batch.send_batch_size }}
    timeout: {{ .Values.otelcol.processors.batch.timeout }}
extensions:
  health_check: {}
exporters:
  zipkin:
    url: {{ if .Values.otelcol.exporters.zipkin.url }} {{ .Values.otelcol.exporters.zipkin.url }} {{ else }} http://{{ template "sumologic.fullname" . }}:9411/api/v2/spans {{ end }}
  # logging:
  #   loglevel: debug
service:
  extensions: {{ include "otelcol.generate_list" .Values.otelcol.extensions | nindent 5 }}
  pipelines:
    traces:
      receivers: {{ include "otelcol.generate_list" .Values.otelcol.receivers | nindent 10 }}
      processors: {{ include "otelcol.generate_list" .Values.otelcol.processors | nindent 10 }}
      exporters: {{ include "otelcol.generate_list" .Values.otelcol.exporters | nindent 10 }}
