sumologic:
  logs:
    metadata:
      provider: otelcol

  metrics:
    enabled: false

# We're using otelcol instead
fluent-bit:
  enabled: false

fluentd:
  events:
    enabled: false

metadata:
  logs:
    config:
      service:
        pipelines:
          logs/otlp/containers:
            receivers:
              - otlp
            processors:
              - memory_limiter
              - filter/include_containers
              - groupbyattrs/containers
              - k8s_tagger
              - resource/add_cluster
              - source/containers
              - resource/drop_annotations
              - resource/containers_copy_node_to_host
              - batch
            exporters:
              - sumologic/containers
          logs/otlp/systemd:
            receivers:
              - otlp
            processors:
              - memory_limiter
              - filter/include_fluent_tag_host
              - filter/include_systemd
              - filter/exclude_kubelet
              - filter/exclude_systemd_syslog
              - filter/exclude_systemd_hostname
              - filter/exclude_systemd_priority
              - filter/exclude_systemd_unit
              - attributes/extract_systemd_source_fields
              - attributes/remove_fluent_tag
              - groupbyattrs/systemd
              - resource/add_cluster
              - source/systemd
              - batch
            exporters:
              - sumologic/systemd_flatten
          logs/otlp/kubelet:
            receivers:
              - otlp
            processors:
              - memory_limiter
              - filter/include_fluent_tag_host
              - filter/include_kubelet
              - filter/exclude_kubelet_syslog
              - filter/exclude_kubelet_hostname
              - filter/exclude_kubelet_priority
              - filter/exclude_kubelet_unit
              - attributes/extract_systemd_source_fields
              - attributes/remove_fluent_tag
              - groupbyattrs/systemd
              - resource/add_cluster
              - source/kubelet
              - batch
            exporters:
              - sumologic/systemd_flatten


otellogs:
  enabled: true
  config:
    service:
      pipelines:
        logs/containers:
          receivers:
            - filelog/containers
          exporters:
            - otlphttp
          processors:
            - filter/exclude_receiver_mock_container
    processors:
      # Filter out receiver-mock logs to prevent snowball effect
      filter/exclude_receiver_mock_container:
        logs:
          exclude:
            match_type: strict
            record_attributes:
              - key: k8s.container.name
                value: receiver-mock
